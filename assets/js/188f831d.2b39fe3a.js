"use strict";(self.webpackChunkdoc_besu=self.webpackChunkdoc_besu||[]).push([[44731,67018,15493],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var a=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,l=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),d=p(n),m=o,h=d["".concat(l,".").concat(m)]||d[m]||u[m]||r;return n?a.createElement(h,s(s({ref:t},c),{},{components:n})):a.createElement(h,s({ref:t},c))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,s=new Array(r);s[0]=m;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i[d]="string"==typeof e?e:o,s[1]=i;for(var p=2;p<r;p++)s[p]=n[p];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},85162:(e,t,n)=>{n.d(t,{Z:()=>s});var a=n(67294),o=n(86010);const r={tabItem:"tabItem_Ymn6"};function s(e){let{children:t,hidden:n,className:s}=e;return a.createElement("div",{role:"tabpanel",className:(0,o.Z)(r.tabItem,s),hidden:n},t)}},74866:(e,t,n)=>{n.d(t,{Z:()=>v});var a=n(87462),o=n(67294),r=n(86010),s=n(12466),i=n(16550),l=n(91980),p=n(67392),c=n(50012);function d(e){return function(e){return o.Children.map(e,(e=>{if(!e||(0,o.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:n,attributes:a,default:o}}=e;return{value:t,label:n,attributes:a,default:o}}))}function u(e){const{values:t,children:n}=e;return(0,o.useMemo)((()=>{const e=t??d(n);return function(e){const t=(0,p.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function m(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function h(e){let{queryString:t=!1,groupId:n}=e;const a=(0,i.k6)(),r=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,l._X)(r),(0,o.useCallback)((e=>{if(!r)return;const t=new URLSearchParams(a.location.search);t.set(r,e),a.replace({...a.location,search:t.toString()})}),[r,a])]}function k(e){const{defaultValue:t,queryString:n=!1,groupId:a}=e,r=u(e),[s,i]=(0,o.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!m({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const a=n.find((e=>e.default))??n[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:t,tabValues:r}))),[l,p]=h({queryString:n,groupId:a}),[d,k]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[a,r]=(0,c.Nk)(n);return[a,(0,o.useCallback)((e=>{n&&r.set(e)}),[n,r])]}({groupId:a}),f=(()=>{const e=l??d;return m({value:e,tabValues:r})?e:null})();(0,o.useLayoutEffect)((()=>{f&&i(f)}),[f]);return{selectedValue:s,selectValue:(0,o.useCallback)((e=>{if(!m({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);i(e),p(e),k(e)}),[p,k,r]),tabValues:r}}var f=n(72389);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function g(e){let{className:t,block:n,selectedValue:i,selectValue:l,tabValues:p}=e;const c=[],{blockElementScrollPositionUntilNextRender:d}=(0,s.o5)(),u=e=>{const t=e.currentTarget,n=c.indexOf(t),a=p[n].value;a!==i&&(d(t),l(a))},m=e=>{let t=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{const n=c.indexOf(e.currentTarget)+1;t=c[n]??c[0];break}case"ArrowLeft":{const n=c.indexOf(e.currentTarget)-1;t=c[n]??c[c.length-1];break}}t?.focus()};return o.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.Z)("tabs",{"tabs--block":n},t)},p.map((e=>{let{value:t,label:n,attributes:s}=e;return o.createElement("li",(0,a.Z)({role:"tab",tabIndex:i===t?0:-1,"aria-selected":i===t,key:t,ref:e=>c.push(e),onKeyDown:m,onClick:u},s,{className:(0,r.Z)("tabs__item",b.tabItem,s?.className,{"tabs__item--active":i===t})}),n??t)})))}function w(e){let{lazy:t,children:n,selectedValue:a}=e;const r=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=r.find((e=>e.props.value===a));return e?(0,o.cloneElement)(e,{className:"margin-top--md"}):null}return o.createElement("div",{className:"margin-top--md"},r.map(((e,t)=>(0,o.cloneElement)(e,{key:t,hidden:e.props.value!==a}))))}function N(e){const t=k(e);return o.createElement("div",{className:(0,r.Z)("tabs-container",b.tabList)},o.createElement(g,(0,a.Z)({},e,t)),o.createElement(w,(0,a.Z)({},e,t)))}function v(e){const t=(0,f.Z)();return o.createElement(N,(0,a.Z)({key:String(t)},e))}},10218:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>u,frontMatter:()=>r,metadata:()=>i,toc:()=>p});var a=n(87462),o=(n(67294),n(3905));const r={},s=void 0,i={unversionedId:"global/postman",id:"version-23.4.0/global/postman",title:"postman",description:"View the Besu JSON-RPC APIs documentation in the Postman format and obtain example requests in multiple coding languages.",source:"@site/versioned_docs/version-23.4.0/global/postman.md",sourceDirName:"global",slug:"/global/postman",permalink:"/23.4.0/global/postman",draft:!1,editUrl:"https://github.com/hyperledger/besu-docs/tree/main/versioned_docs/version-23.4.0/global/postman.md",tags:[],version:"23.4.0",lastUpdatedAt:1700682270,formattedLastUpdatedAt:"Nov 22, 2023",frontMatter:{}},l={},p=[],c={toc:p},d="wrapper";function u(e){let{components:t,...r}=e;return(0,o.kt)(d,(0,a.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("admonition",{title:"Besu JSON-RPC APIs documentation in Postman format",type:"info"},(0,o.kt)("p",{parentName:"admonition"},"View the ",(0,o.kt)("a",{parentName:"p",href:"https://www.postman.com/hyperledger/workspace/hyperledger-besu/collection/11610746-f334929f-c8c3-43ed-bb73-69a6f0d728d8"},"Besu JSON-RPC APIs documentation")," in the Postman format and obtain example requests in multiple coding languages."),(0,o.kt)("h4",{parentName:"admonition",id:"run-in-postman"},"Run in Postman"),(0,o.kt)("p",{parentName:"admonition"},"Click the following button to fork the collection and run requests directly on your local network."),(0,o.kt)("p",{parentName:"admonition"},(0,o.kt)("a",{parentName:"p",href:"https://god.gw.postman.com/run-collection/11610746-f334929f-c8c3-43ed-bb73-69a6f0d728d8?action=collection%2Ffork&collection-url=entityId%3D11610746-f334929f-c8c3-43ed-bb73-69a6f0d728d8%26entityType%3Dcollection%26workspaceId%3Dc4b60b6f-9f15-42d0-8327-7ebabca6f0fd#?env%5BBesu%20node%20on%20local%20host%5D=W3sia2V5IjoicnBjLWh0dHAtaG9zdCIsInZhbHVlIjoibG9jYWxob3N0IiwiZW5hYmxlZCI6ZmFsc2V9LHsia2V5IjoicnBjLWh0dHAtcG9ydCIsInZhbHVlIjoiODU0NSIsImVuYWJsZWQiOmZhbHNlfV0="},(0,o.kt)("img",{parentName:"a",src:"https://run.pstmn.io/button.svg",alt:"Run in Postman"})),"."),(0,o.kt)("h4",{parentName:"admonition",id:"download-collection"},"Download collection"),(0,o.kt)("p",{parentName:"admonition"},"Alternatively you can ",(0,o.kt)("a",{target:"_blank",href:n(93508).Z},"download the JSON collection file"),".")))}u.isMDXComponent=!0},49674:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>u,frontMatter:()=>r,metadata:()=>i,toc:()=>p});var a=n(87462),o=(n(67294),n(3905));const r={},s=void 0,i={unversionedId:"global/test_accounts",id:"version-23.4.0/global/test_accounts",title:"test_accounts",description:"The following accounts are test accounts and their private keys are publicly visible in this documentation and in publicly available source code.",source:"@site/versioned_docs/version-23.4.0/global/test_accounts.md",sourceDirName:"global",slug:"/global/test_accounts",permalink:"/23.4.0/global/test_accounts",draft:!1,editUrl:"https://github.com/hyperledger/besu-docs/tree/main/versioned_docs/version-23.4.0/global/test_accounts.md",tags:[],version:"23.4.0",lastUpdatedAt:1700682270,formattedLastUpdatedAt:"Nov 22, 2023",frontMatter:{}},l={},p=[],c={toc:p},d="wrapper";function u(e){let{components:t,...n}=e;return(0,o.kt)(d,(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("admonition",{type:"danger"},(0,o.kt)("mdxAdmonitionTitle",{parentName:"admonition"},(0,o.kt)("strong",{parentName:"mdxAdmonitionTitle"},"Do not use the test accounts on Ethereum Mainnet or any production network.")),(0,o.kt)("p",{parentName:"admonition"},"The following accounts are test accounts and their private keys are publicly visible in this documentation and in publicly available source code."),(0,o.kt)("p",{parentName:"admonition"},"They are not secure and everyone can use them."),(0,o.kt)("p",{parentName:"admonition"},(0,o.kt)("strong",{parentName:"p"},"Using test accounts on Ethereum Mainnet and production networks can lead to loss of funds and identity fraud.")),(0,o.kt)("p",{parentName:"admonition"},"In this documentation, we only provide test accounts for ease of testing and learning purposes; never use them for other purposes."),(0,o.kt)("p",{parentName:"admonition"},(0,o.kt)("strong",{parentName:"p"},"Always secure your Ethereum Mainnet and any production account properly.")),(0,o.kt)("p",{parentName:"admonition"},"See for instance ",(0,o.kt)("a",{parentName:"p",href:"https://support.mycrypto.com/staying-safe/protecting-yourself-and-your-funds"},'MyCrypto "Protecting Yourself and Your Funds" guide'),".")),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("mdxAdmonitionTitle",{parentName:"admonition"},'"Test Account 1 (address ',(0,o.kt)("inlineCode",{parentName:"mdxAdmonitionTitle"},"0xfe3b557e8fb62b89f4916b721be55ceb828dbd73"),')"'),(0,o.kt)("p",{parentName:"admonition"},"Private key to copy :"),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre",className:"language-text"},"0x8f2a55949038a9610f50fb23b5883af3b4ecb3c3bb792cbcefbd1542c692be63\n")),(0,o.kt)("p",{parentName:"admonition"},"Initial balance : 200 Eth ",(0,o.kt)("em",{parentName:"p"},"(200000000000000000000 Wei)"))),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("mdxAdmonitionTitle",{parentName:"admonition"},'"Test Account 2 (address ',(0,o.kt)("inlineCode",{parentName:"mdxAdmonitionTitle"},"0x627306090abaB3A6e1400e9345bC60c78a8BEf57"),')"'),(0,o.kt)("p",{parentName:"admonition"},"Private key to copy :"),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre",className:"language-text"},"0xc87509a1c067bbde78beb793e6fa76530b6382a4c0241e5e4a9ec0a0f44dc0d3\n")),(0,o.kt)("p",{parentName:"admonition"},"Initial balance : 90000 Eth ",(0,o.kt)("em",{parentName:"p"},"(90000000000000000000000 Wei)"))),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("mdxAdmonitionTitle",{parentName:"admonition"},'"Test Account 3 (address ',(0,o.kt)("inlineCode",{parentName:"mdxAdmonitionTitle"},"0xf17f52151EbEF6C7334FAD080c5704D77216b732"),')"'),(0,o.kt)("p",{parentName:"admonition"},"Private key to copy :"),(0,o.kt)("pre",{parentName:"admonition"},(0,o.kt)("code",{parentName:"pre",className:"language-text"},"0xae6ae8e5ccbfb04590405997ee2d52d2b330726137b875053c36d94e974d162f\n")),(0,o.kt)("p",{parentName:"admonition"},"Initial balance : 90000 Eth ",(0,o.kt)("em",{parentName:"p"},"(90000000000000000000000 Wei)"))))}u.isMDXComponent=!0},18479:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>c,default:()=>f,frontMatter:()=>p,metadata:()=>d,toc:()=>m});var a=n(87462),o=(n(67294),n(3905)),r=n(74866),s=n(85162),i=n(49674),l=n(10218);const p={title:"Quorum Developer Quickstart",sidebar_position:1,description:"Rapidly generate local blockchain networks."},c="Developer Quickstart",d={unversionedId:"private-networks/tutorials/quickstart",id:"version-23.4.0/private-networks/tutorials/quickstart",title:"Quorum Developer Quickstart",description:"Rapidly generate local blockchain networks.",source:"@site/versioned_docs/version-23.4.0/private-networks/tutorials/quickstart.md",sourceDirName:"private-networks/tutorials",slug:"/private-networks/tutorials/quickstart",permalink:"/23.4.0/private-networks/tutorials/quickstart",draft:!1,editUrl:"https://github.com/hyperledger/besu-docs/tree/main/versioned_docs/version-23.4.0/private-networks/tutorials/quickstart.md",tags:[],version:"23.4.0",lastUpdatedAt:1700682270,formattedLastUpdatedAt:"Nov 22, 2023",sidebarPosition:1,frontMatter:{title:"Quorum Developer Quickstart",sidebar_position:1,description:"Rapidly generate local blockchain networks."},sidebar:"privateDocSidebar",previous:{title:"Tutorials",permalink:"/23.4.0/category/tutorials"},next:{title:"Create a QBFT network",permalink:"/23.4.0/private-networks/tutorials/qbft"}},u={},m=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Generate the tutorial blockchain configuration files",id:"generate-the-tutorial-blockchain-configuration-files",level:2},{value:"Start the network",id:"start-the-network",level:2},{value:"Use a block explorer",id:"use-a-block-explorer",level:2},{value:"Monitor nodes with Prometheus and Grafana",id:"monitor-nodes-with-prometheus-and-grafana",level:2},{value:"Run JSON-RPC requests",id:"run-json-rpc-requests",level:2},{value:"Run with <code>cURL</code>",id:"run-with-curl",level:3},{value:"Run with Postman",id:"run-with-postman",level:3},{value:"Request the node version",id:"request-the-node-version",level:3},{value:"Count the peers",id:"count-the-peers",level:3},{value:"Request the most recent block number",id:"request-the-most-recent-block-number",level:3},{value:"Public transactions",id:"public-transactions",level:2},{value:"Create a transaction using MetaMask",id:"create-a-transaction-using-metamask",level:2},{value:"Smart contract and dapp usage",id:"smart-contract-and-dapp-usage",level:2},{value:"Deploy your own dapp",id:"deploy-your-own-dapp",level:3},{value:"Stop and restart the private network without removing containers",id:"stop-and-restart-the-private-network-without-removing-containers",level:2},{value:"Stop the private network and remove containers",id:"stop-the-private-network-and-remove-containers",level:2},{value:"Add a new node to the network",id:"add-a-new-node-to-the-network",level:2},{value:"1. Create the node key files",id:"1-create-the-node-key-files",level:3},{value:"2. Create new node directory",id:"2-create-new-node-directory",level:3},{value:"3. Update docker-compose",id:"3-update-docker-compose",level:3},{value:"4. Update Prometheus configuration",id:"4-update-prometheus-configuration",level:3},{value:"5. Update files with the enode address",id:"5-update-files-with-the-enode-address",level:3},{value:"6. Start the network",id:"6-start-the-network",level:3}],h={toc:m},k="wrapper";function f(e){let{components:t,...p}=e;return(0,o.kt)(k,(0,a.Z)({},h,p,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"developer-quickstart"},"Developer Quickstart"),(0,o.kt)("p",null,"The Quorum Developer Quickstart uses the Hyperledger Besu Docker image to run a private ",(0,o.kt)("a",{parentName:"p",href:"/23.4.0/private-networks/how-to/configure/consensus/ibft"},"IBFT 2.0")," network of Besu nodes managed by Docker Compose."),(0,o.kt)("admonition",{type:"danger"},(0,o.kt)("p",{parentName:"admonition"},"This tutorial runs a private network suitable for education or demonstration purposes and is not intended for running production networks.")),(0,o.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"One of the following operating systems:",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Linux on x86_64 architecture"),(0,o.kt)("li",{parentName:"ul"},"macOS on an Intel processor (M1 processor not supported yet)"),(0,o.kt)("li",{parentName:"ul"},"Windows 64-bit edition, with:",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},"Windows Subsystem for Linux 2"),(0,o.kt)("li",{parentName:"ul"},"Docker desktop configured to use the WSL2-based engine"))))),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://docs.docker.com/compose/install/"},"Docker and Docker Compose")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://nodejs.org/en/download/"},"Node.js")," version 12 or higher"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://www.trufflesuite.com/truffle"},"Truffle")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://curl.haxx.se/download.html"},"cURL command line")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://metamask.io/"},"MetaMask"))),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"Allow Docker up to 4G of memory or 6G if running the privacy examples. Refer to the ",(0,o.kt)("strong",{parentName:"p"},"Resources")," section in ",(0,o.kt)("a",{parentName:"p",href:"https://docs.docker.com/docker-for-mac/"},"Docker for Mac")," and ",(0,o.kt)("a",{parentName:"p",href:"https://docs.docker.com/docker-for-windows/"},"Docker Desktop")," for details.")),(0,o.kt)("h2",{id:"generate-the-tutorial-blockchain-configuration-files"},"Generate the tutorial blockchain configuration files"),(0,o.kt)("p",null,"To create the tutorial ",(0,o.kt)("inlineCode",{parentName:"p"},"docker-compose")," files and artifacts, run:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npx quorum-dev-quickstart\n")),(0,o.kt)("p",null,"Follow the prompts displayed to run Hyperledger Besu and ",(0,o.kt)("a",{parentName:"p",href:"/23.4.0/private-networks/how-to/monitor/elastic-stack"},"logging with ELK"),". Enter ",(0,o.kt)("inlineCode",{parentName:"p"},"n")," for ",(0,o.kt)("a",{parentName:"p",href:"https://docs.orchestrate.consensys.net/en/stable/"},"Codefi Orchestrate")," and ",(0,o.kt)("a",{parentName:"p",href:"/23.4.0/private-networks/concepts/privacy/"},"private transactions"),"."),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"If you enter ",(0,o.kt)("inlineCode",{parentName:"p"},"y")," for private transactions, you get three Besu nodes with corresponding Tessera nodes for privacy. You can follow the ",(0,o.kt)("a",{parentName:"p",href:"/23.4.0/private-networks/tutorials/privacy/"},"privacy walk-through"),", which details how to send private transactions and interact with deployed private contracts.")),(0,o.kt)("h2",{id:"start-the-network"},"Start the network"),(0,o.kt)("p",null,"To start the network, go to the installation directory (",(0,o.kt)("inlineCode",{parentName:"p"},"quorum-test-network")," if you used the default value) and run:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"./run.sh\n")),(0,o.kt)("p",null,"The script builds the Docker images, and runs the Docker containers."),(0,o.kt)("p",null,"Four Besu IBFT 2.0 validator nodes and a non-validator node are created to simulate a base network."),(0,o.kt)("p",null,"When execution is successfully finished, the process lists the available services:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-log",metastring:'title="Services list"',title:'"Services','list"':!0},"*************************************\nQuorum Dev Quickstart\n*************************************\n----------------------------------\nList endpoints and services\n----------------------------------\nJSON-RPC HTTP service endpoint      : http://localhost:8545\nJSON-RPC WebSocket service endpoint : ws://localhost:8546\nWeb block explorer address          : http://localhost:25000/\nPrometheus address                  : http://localhost:9090/graph\nGrafana address                     : http://localhost:3000/d/XE4V0WGZz/besu-overview?orgId=1&refresh=10s&from=now-30m&to=now&var-system=All\nKibana logs address                 : http://localhost:5601/app/kibana#/discover\nCollated logs using Grafana Loki    : http://localhost:3000/d/Ak6eXLsPxFemKYKEXfcH/quorum-logs-loki?orgId=1&var-app=besu&var-search=\n\nFor more information on the endpoints and services, refer to README.md in the installation directory.\n****************************************************************\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Use the ",(0,o.kt)("strong",{parentName:"li"},"JSON-RPC HTTP service endpoint")," to access the RPC node service from your dapp or from cryptocurrency wallets such as MetaMask."),(0,o.kt)("li",{parentName:"ul"},"Use the ",(0,o.kt)("strong",{parentName:"li"},"JSON-RPC WebSocket service endpoint")," to access the Web socket node service from your dapp."),(0,o.kt)("li",{parentName:"ul"},"Use the ",(0,o.kt)("strong",{parentName:"li"},"Web block explorer address")," to display the ",(0,o.kt)("a",{parentName:"li",href:"http://localhost:25000"},"block explorer Web application"),"."),(0,o.kt)("li",{parentName:"ul"},"Use the ",(0,o.kt)("strong",{parentName:"li"},"Prometheus address")," to access the ",(0,o.kt)("a",{parentName:"li",href:"http://localhost:9090/graph"},"Prometheus dashboard"),". ",(0,o.kt)("a",{parentName:"li",href:"/23.4.0/public-networks/how-to/monitor/metrics"},"Read more about metrics"),"."),(0,o.kt)("li",{parentName:"ul"},"Use the ",(0,o.kt)("strong",{parentName:"li"},"Grafana address")," to access the ",(0,o.kt)("a",{parentName:"li",href:"http://localhost:3000/d/XE4V0WGZz/besu-overview?orgId=1&refresh=10s&from=now-30m&to=now&var-system=All"},"Grafana dashboard"),". ",(0,o.kt)("a",{parentName:"li",href:"/23.4.0/public-networks/how-to/monitor/metrics"},"Read more about metrics"),"."),(0,o.kt)("li",{parentName:"ul"},"Use the ",(0,o.kt)("strong",{parentName:"li"},"Kibana logs address")," to access the ",(0,o.kt)("a",{parentName:"li",href:"http://localhost:5601/app/kibana#/discover"},"logs in Kibana"),". ",(0,o.kt)("a",{parentName:"li",href:"/23.4.0/private-networks/how-to/monitor/elastic-stack"},"Read more about log management"),"."),(0,o.kt)("li",{parentName:"ul"},"Use the ",(0,o.kt)("strong",{parentName:"li"},"Grafana Loki logs address")," to access the ",(0,o.kt)("a",{parentName:"li",href:"http://localhost:3000/d/Ak6eXLsPxFemKYKEXfcH/quorum-logs-loki?orgId=1&var-app=besu&var-search="},"logs in Grafana"),". ",(0,o.kt)("a",{parentName:"li",href:"/23.4.0/private-networks/how-to/monitor/loki"},"Read more about log management"),".")),(0,o.kt)("p",null,"To display the list of endpoints again, run:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"./list.sh\n")),(0,o.kt)("h2",{id:"use-a-block-explorer"},"Use a block explorer"),(0,o.kt)("p",null,"You can ",(0,o.kt)("a",{parentName:"p",href:"/23.4.0/private-networks/how-to/monitor/sirato-explorer"},"use Sirato Blockchain Explorer")," to analyze block information, contract metadata, transaction searches, and more. Sirato has built-in support for privacy-enabled Besu networks."),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"You must connect to one of the privacy nodes (for example, ",(0,o.kt)("inlineCode",{parentName:"p"},"member1besu"),"), not the dedicated RPC, in order to allow access for Besu ",(0,o.kt)("a",{parentName:"p",href:"/23.4.0/private-networks/reference/api/#priv-methods"},"privacy API methods"),". In production networks, you must ",(0,o.kt)("a",{parentName:"p",href:"/23.4.0/public-networks/how-to/use-besu-api/authenticate"},"secure access")," to RPC nodes.")),(0,o.kt)("p",null,"Clone the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/web3labs/sirato-free"},"Sirato GitHub repository"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"git clone https://github.com/web3labs/sirato-free\n")),(0,o.kt)("p",null,"From the Sirato directory, run the following command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"cd docker-compose\nNODE_ENDPOINT=member1besu PORT=26000 docker-compose -f docker-compose.yml -f sirato-extensions/docker-compose-quorum-dev-quickstart.yml up\n")),(0,o.kt)("p",null,"Open ",(0,o.kt)("inlineCode",{parentName:"p"},"http://localhost/")," on your browser. You\u2019ll see the new initialization page while it boots up. This may take 5\u201310 minutes for the all services to start and the ingestion sync to complete."),(0,o.kt)("p",null,"To stop all the services from running, run the following script from the ",(0,o.kt)("inlineCode",{parentName:"p"},"docker-compose")," directory:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"docker-compose down -v\n")),(0,o.kt)("h2",{id:"monitor-nodes-with-prometheus-and-grafana"},"Monitor nodes with Prometheus and Grafana"),(0,o.kt)("p",null,"The sample network also includes Prometheus and Grafana monitoring tools to let you visualize node health and usage. You can directly access these tools from your browser at the addresses displayed in the endpoint list."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"http://localhost:9090/graph"},"Prometheus dashboard")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"http://localhost:3000/d/XE4V0WGZz/besu-overview?orgId=1&refresh=10s&from=now-30m&to=now&var-system=All"},"Grafana dashboard")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"http://localhost:3000/d/Ak6eXLsPxFemKYKEXfcH/quorum-logs-loki?orgId=1&var-app=quorum&var-search="},"Grafana Loki logs dashboard"))),(0,o.kt)("p",null,"For more details on how to configure and use these tools for your own nodes, see the ",(0,o.kt)("a",{parentName:"p",href:"/23.4.0/public-networks/how-to/monitor/metrics"},"performance monitoring documentation"),", ",(0,o.kt)("a",{parentName:"p",href:"https://prometheus.io/docs/introduction/overview/"},"Prometheus documentation")," and ",(0,o.kt)("a",{parentName:"p",href:"https://grafana.com/docs/"},"Grafana documentation"),"."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Grafana dashboard screenshot",src:n(75093).Z,width:"2880",height:"3958"})),(0,o.kt)("p",null,"and collated logs via Grafana Loki"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Grafana Loki dashboard screenshot",src:n(37866).Z,width:"1915",height:"898"})),(0,o.kt)("h2",{id:"run-json-rpc-requests"},"Run JSON-RPC requests"),(0,o.kt)("p",null,"You can run JSON-RPC requests on:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"HTTP with ",(0,o.kt)("inlineCode",{parentName:"li"},"http://localhost:8545"),"."),(0,o.kt)("li",{parentName:"ul"},"WebSockets with ",(0,o.kt)("inlineCode",{parentName:"li"},"ws://localhost:8546"),".")),(0,o.kt)("h3",{id:"run-with-curl"},"Run with ",(0,o.kt)("inlineCode",{parentName:"h3"},"cURL")),(0,o.kt)("p",null,"This tutorial uses ",(0,o.kt)("a",{parentName:"p",href:"https://curl.haxx.se/download.html"},"cURL")," to send JSON-RPC requests over HTTP."),(0,o.kt)("h3",{id:"run-with-postman"},"Run with Postman"),(0,o.kt)("p",null,"You can also run all the requests with the Besu Postman collection."),(0,o.kt)(l.default,{mdxType:"Postman"}),(0,o.kt)("h3",{id:"request-the-node-version"},"Request the node version"),(0,o.kt)("p",null,"Run the following command from the host shell:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'curl -X POST --data \'{"jsonrpc":"2.0","method":"web3_clientVersion","params":[],"id":1}\' http://localhost:8545\n')),(0,o.kt)("p",null,"The result displays the client version of the running node:"),(0,o.kt)(r.Z,{mdxType:"Tabs"},(0,o.kt)(s.Z,{label:"Result example",value:"tab1",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "result": "besu/v21.1.2/linux-x86_64/oracle_openjdk-java-11"\n}\n'))),(0,o.kt)(s.Z,{label:"Result explanation",value:"tab2",mdxType:"TabItem"},(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},'"jsonrpc" : "2.0"')," indicates that the JSON-RPC 2.0 spec format is used."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},'"id" : 1')," is the request identifier used to match the request and the response. This tutorial always uses 1."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},'"result"')," contains the running Besu information:",(0,o.kt)("ul",{parentName:"li"},(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"v21.1.2")," is the running Besu version number. This may be different when you run this tutorial."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"linux-x86_64")," is the architecture used to build this version."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"oracle_openjdk-java-11")," is the JVM type and version used to build this version. This may be different when you run this tutorial.")))))),(0,o.kt)("p",null,"Successfully calling this method shows that you can connect to the nodes using JSON-RPC over HTTP."),(0,o.kt)("p",null,"From here, you can walk through more interesting requests demonstrated in the rest of this section, or skip ahead to ",(0,o.kt)("a",{parentName:"p",href:"#create-a-transaction-using-metamask"},"Create a transaction using MetaMask"),"."),(0,o.kt)("h3",{id:"count-the-peers"},"Count the peers"),(0,o.kt)("p",null,"Peers are the other nodes connected to the node receiving the JSON-RPC request."),(0,o.kt)("p",null,"Poll the peer count using ",(0,o.kt)("a",{parentName:"p",href:"/23.4.0/public-networks/reference/api/#net_peercount"},(0,o.kt)("inlineCode",{parentName:"a"},"net_peerCount")),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'curl -X POST --data \'{"jsonrpc":"2.0","method":"net_peerCount","params":[],"id":1}\' http://localhost:8545\n')),(0,o.kt)("p",null,"The result indicates that there are four peers (the validators):"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "result": "0x4"\n}\n')),(0,o.kt)("h3",{id:"request-the-most-recent-block-number"},"Request the most recent block number"),(0,o.kt)("p",null,"Call ",(0,o.kt)("a",{parentName:"p",href:"/23.4.0/public-networks/reference/api/#eth_blockNumber"},(0,o.kt)("inlineCode",{parentName:"a"},"eth_blockNumber"))," to retrieve the number of the most recently synchronized block:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'curl -X POST --data \'{"jsonrpc":"2.0","method":"eth_blockNumber","params":[],"id":1}\' http://localhost:8545\n')),(0,o.kt)("p",null,"The result indicates the highest block number synchronized on this node."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "jsonrpc": "2.0",\n  "id": 1,\n  "result": "0x2a"\n}\n')),(0,o.kt)("p",null,"Here the hexadecimal value ",(0,o.kt)("inlineCode",{parentName:"p"},"0x2a")," translates to decimal as ",(0,o.kt)("inlineCode",{parentName:"p"},"42"),", the number of blocks received by the node so far, about two minutes after the new network started."),(0,o.kt)("h2",{id:"public-transactions"},"Public transactions"),(0,o.kt)("p",null,"This example uses the ",(0,o.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/web3"},"web3.js")," library to make the API calls, using the ",(0,o.kt)("inlineCode",{parentName:"p"},"rpcnode"),"\naccessed on ",(0,o.kt)("inlineCode",{parentName:"p"},"http://localhost:8545"),"."),(0,o.kt)("p",null,"Navigate to the ",(0,o.kt)("inlineCode",{parentName:"p"},"smart_contracts")," directory and deploy the public transaction:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"cd smart_contracts\nnpm install\nnode scripts/public/public_tx.js\n# or via ethers\nnode scripts/public/public_tx_ethers.js\n")),(0,o.kt)("p",null,"This deploys the contract and sends an arbitrary value (",(0,o.kt)("inlineCode",{parentName:"p"},"47"),") from ",(0,o.kt)("inlineCode",{parentName:"p"},"Member1")," to ",(0,o.kt)("inlineCode",{parentName:"p"},"Member3"),". The script then performs:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"A read operation on the contract using the ",(0,o.kt)("inlineCode",{parentName:"li"},"get")," function and the contract's ABI, at the specified address."),(0,o.kt)("li",{parentName:"ol"},"A write operation using the ",(0,o.kt)("inlineCode",{parentName:"li"},"set")," function and the contract's ABI, at the address and sets the value to ",(0,o.kt)("inlineCode",{parentName:"li"},"123"),"."),(0,o.kt)("li",{parentName:"ol"},"A read operation on all events emitted.")),(0,o.kt)("p",null,"The script output is as follows:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"{\n  address: '0x2b224e70f606267586616586850aC6f4Ae971eCb',\n  privateKey: '0xb3f2ab4d7bb07a4168432fb572ceb57fd9b842ed8dc41256255db6ff95784000',\n  signTransaction: [Function: signTransaction],\n  sign: [Function: sign],\n  encrypt: [Function: encrypt]\n}\ncreate and sign the txn\nsending the txn\ntx transactionHash: 0x423d56f958a316d2691e05e158c6a3f37004c27a1ec9697cf9fed2a5c2ae2c2b\ntx contractAddress: 0xB9A44d3BeF64ABfA1485215736B61880eDe630D9\nContract deployed at address: 0xB9A44d3BeF64ABfA1485215736B61880eDe630D9\nUse the smart contracts 'get' function to read the contract's constructor initialized value .. \nObtained value at deployed contract is: 47\nUse the smart contracts 'set' function to update that value to 123 .. \nsending the txn\ntx transactionHash: 0xab460da2544687c5fae4089d01b14bbb9bea765449e1fd2c30b30e1761481344\ntx contractAddress: null\nVerify the updated value that was set .. \nObtained value at deployed contract is: 123\nObtained all value events from deployed contract : [47,123]\n")),(0,o.kt)("p",null,"We also have a second example that shows how to transfer ETH between accounts. Navigate to the ",(0,o.kt)("inlineCode",{parentName:"p"},"smart_contracts")," directory\nand deploy the ",(0,o.kt)("inlineCode",{parentName:"p"},"eth_tx")," transaction:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"cd smart_contracts\nnpm install\nnode scripts/public/eth_tx.js\n")),(0,o.kt)("p",null,"The output is as follows:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"Account A has balance of: 90000\nAccount B has balance of: 0\ncreate and sign the txn\nsending the txn\ntx transactionHash: 0x8b9d247900f2b50a8dded3c0d73ee29f04487a268714ec4ebddf268e73080f98\nAccount A has an updated balance of: 89999.999999999999999744\nAccount B has an updated balance of: 0.000000000000000256\n")),(0,o.kt)("h2",{id:"create-a-transaction-using-metamask"},"Create a transaction using MetaMask"),(0,o.kt)("p",null,"You can use ",(0,o.kt)("a",{parentName:"p",href:"https://metamask.io/"},"MetaMask")," to send a transaction on your private network."),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Open MetaMask and connect it to your private network RPC endpoint by selecting ",(0,o.kt)("inlineCode",{parentName:"li"},"Localhost 8545")," in the network list."),(0,o.kt)("li",{parentName:"ol"},"Choose one of the following test accounts and ",(0,o.kt)("a",{parentName:"li",href:"https://metamask.zendesk.com/hc/en-us/articles/360015489331-How-to-import-an-Account"},"import it into MetaMask by copying the corresponding private key"),".")),(0,o.kt)(i.default,{mdxType:"TestAccounts"}),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"Besu doesn't incorporate ",(0,o.kt)("a",{parentName:"p",href:"/23.4.0/public-networks/how-to/send-transactions"},"account management"),". To create your own account, you have to use a third-party tool, such as MetaMask.")),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"After importing an existing test account, ",(0,o.kt)("a",{parentName:"p",href:"https://metamask.zendesk.com/hc/en-us/articles/360015289452-Creating-Additional-MetaMask-Wallets-New-UI-"},"create another test account from scratch")," to use as the recipient for a test Ether transaction.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"In MetaMask, select the new test account and ",(0,o.kt)("a",{parentName:"p",href:"https://metamask.zendesk.com/hc/en-us/articles/360015289512-How-to-copy-your-MetaMask-Account-Public-Address"},"copy its address"),".")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"In the ",(0,o.kt)("a",{parentName:"p",href:"http://localhost:25000"},"Block Explorer"),", search for the new test account by selecting the \ud83d\udd0d and pasting the test account address into the search box."),(0,o.kt)("p",{parentName:"li"},"The new test account displays with a zero balance.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},(0,o.kt)("a",{parentName:"p",href:"https://metamask.zendesk.com/hc/en-us/articles/360015488931-How-to-send-ETH-and-ERC-20-tokens-from-your-MetaMask-Wallet"},"Send test Ether")," from the first test account (containing test Ether) to the new test account (which has a zero balance)."),(0,o.kt)("admonition",{parentName:"li",type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"You can use a zero gas price here as this private test network is a ",(0,o.kt)("a",{parentName:"p",href:"/23.4.0/private-networks/how-to/configure/free-gas"},"free gas network"),", but the maximum amount of gas that can be used (the gas limit) for a value transaction must be at least 21000."))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Refresh the Block Explorer page in your browser displaying the target test account."),(0,o.kt)("p",{parentName:"li"},"The updated balance reflects the transaction completed using MetaMask."))),(0,o.kt)("h2",{id:"smart-contract-and-dapp-usage"},"Smart contract and dapp usage"),(0,o.kt)("p",null,"You can use a demo dapp called Pet Shop, provided by ",(0,o.kt)("a",{parentName:"p",href:"https://www.trufflesuite.com/tutorial"},"Truffle"),"."),(0,o.kt)("p",null,"The dapp runs a local website using Docker, and uses smart contracts deployed on the network."),(0,o.kt)("p",null,"The directory created by ",(0,o.kt)("inlineCode",{parentName:"p"},"quorum-dev-quickstart")," includes a ",(0,o.kt)("inlineCode",{parentName:"p"},"dapps")," directory with a ",(0,o.kt)("inlineCode",{parentName:"p"},"pet-shop")," subdirectory, which contains the source code for the dapp, including the smart contracts, website, and configurations to run this tutorial."),(0,o.kt)("p",null,"With the blockchain running and MetaMask connected to ",(0,o.kt)("inlineCode",{parentName:"p"},"Localhost 8545")," via the browser, run the following command to start the Pet Shop dapp:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"cd dapps/pet-shop\n./run_dapp.sh\n")),(0,o.kt)("p",null,"The script:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Installs the dapp Node dependencies (you may see some warnings here, but it will not prevent the dapp from running)."),(0,o.kt)("li",{parentName:"ol"},"Compiles the contracts."),(0,o.kt)("li",{parentName:"ol"},"Deploys the contracts to the blockchain."),(0,o.kt)("li",{parentName:"ol"},"Runs tests."),(0,o.kt)("li",{parentName:"ol"},"Builds and runs a Docker image to serve the dapp website.")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-text",metastring:"'./run_dapp.sh' example output","'./run_dapp.sh'":!0,example:!0,output:!0},"Compiling your contracts...\n===========================\n> Compiling ./contracts/Adoption.sol\n> Compiling ./contracts/Migrations.sol\n> Artifacts written to /Users/demo/quorum-test-network/dapps/pet-shop/pet-shop-box/build/contracts\n> Compiled successfully using:\n    - solc: 0.5.16+commit.9c3226ce.Emscripten.clang\n\nStarting migrations...\n======================\n> Network name:    'quickstartWallet'\n> Network id:      1337\n> Block gas limit: 16234336 (0xf7b760)\n\n1_initial_migration.js\n======================\n\n    Deploying 'Migrations'\n    ----------------------\n    > transaction hash:    0xdd27f5bc5b0c4a42bb4f4d9ba00b4d33742de10ba8f03484cbf095ee824ba11a\n    > Blocks: 0            Seconds: 0\n    > contract address:    0xFB88dE099e13c3ED21F80a7a1E49f8CAEcF10df6\n    > block number:        2747\n    > block timestamp:     1618000437\n    > account:             0x627306090abaB3A6e1400e9345bC60c78a8BEf57\n    > balance:             89999.97435026\n    > gas used:            221555 (0x36173)\n    > gas price:           20 gwei\n    > value sent:          0 ETH\n    > total cost:          0.0044311 ETH\n\n\n    > Saving migration to chain.\n    > Saving artifacts\n      -------------------------------------\n    > Total cost:           0.0044311 ETH\n\n2_deploy_contracts.js\n=====================\n\n    Deploying 'Adoption'\n    --------------------\n    > transaction hash:    0xd6f5b11807a0727a92b6063c95b9101769d310592b0d3cf35d6df233d05d50e6\n    > Blocks: 0            Seconds: 0\n    > contract address:    0xf204a4Ef082f5c04bB89F7D5E6568B796096735a\n    > block number:        2749\n    > block timestamp:     1618000441\n    > account:             0x627306090abaB3A6e1400e9345bC60c78a8BEf57\n    > balance:             89999.968712\n    > gas used:            239915 (0x3a92b)\n    > gas price:           20 gwei\n    > value sent:          0 ETH\n    > total cost:          0.0047983 ETH\n\n\n    > Saving migration to chain.\n    > Saving artifacts\n      -------------------------------------\n    > Total cost:           0.0047983 ETH\n\nSummary\n=======\n> Total deployments:   2\n> Final cost:          0.0092294 ETH\n\n\nUsing network 'quickstartWallet'.\n\nCompiling your contracts...\n===========================\n> Compiling ./test/TestAdoption.sol\n\nTestAdoption\n\u2713 testUserCanAdoptPet (2071ms)\n\u2713 testGetAdopterAddressByPetId (6070ms)\n\u2713 testGetAdopterAddressByPetIdInArray (6077ms)\n\n3 passing (37s)\n")),(0,o.kt)("p",null,"After these tests are successful, the script builds a container for the Pet Shop dapp and deploys it, binding it to port 3001 on your system."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-text"},"Sending build context to Docker daemon  489.4MB\nStep 1/5 : FROM node:12.14.1-stretch-slim\n---\x3e 2f7e25ad14ea\nStep 2/5 : EXPOSE 3001\n---\x3e Using cache\n---\x3e 2ef0665a040a\nStep 3/5 : WORKDIR /app\n---\x3e Using cache\n---\x3e e8e97cedb575\nStep 4/5 : COPY . /app\n---\x3e f70e4265e598\nStep 5/5 : CMD npm run dev\n---\x3e Running in 3c6e8bdb3f3b\nRemoving intermediate container 3c6e8bdb3f3b\n---\x3e ce2588e47ab0\nSuccessfully built ce2588e47ab0\nSuccessfully tagged quorum-dev-quickstart_pet_shop:latest\nb1615ab765656bc027f63fc60019dba1ca572305766c820f41eaf113b7e14cf8\n")),(0,o.kt)("p",null,"In the browser where you have MetaMask enabled and one of the test accounts loaded, open a new tab and navigate to ",(0,o.kt)("a",{parentName:"p",href:"http://localhost:3001"},"the Pet Shop dapp")," where you can adopt lovely pets (sorry, not for real, it's a demo)."),(0,o.kt)("p",null,"When you select ",(0,o.kt)("strong",{parentName:"p"},"Adopt"),", a MetaMask window pops up and requests your permission to continue with the transaction."),(0,o.kt)("p",null,"After the transaction is complete and successful, the status of the pet you adopted shows ",(0,o.kt)("strong",{parentName:"p"},"Success"),"."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Dapp UI",src:n(65592).Z,width:"1390",height:"706"})),(0,o.kt)("p",null,"You can also search for the transaction and view its details in the ",(0,o.kt)("a",{parentName:"p",href:"http://localhost:25000/"},"Block Explorer"),"."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Dapp UI",src:n(69571).Z,width:"1309",height:"738"})),(0,o.kt)("p",null,"The MetMask UI also keeps a record of the transaction."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Dapp UI",src:n(27154).Z,width:"1303",height:"662"})),(0,o.kt)("h3",{id:"deploy-your-own-dapp"},"Deploy your own dapp"),(0,o.kt)("p",null,"You can deploy your own dapp to the Quorum Developer Quickstart, by configuring your dapp to point to the Quickstart network."),(0,o.kt)("p",null,"If you're using ",(0,o.kt)("a",{parentName:"p",href:"https://trufflesuite.com/truffle/"},"Truffle"),", update the ",(0,o.kt)("inlineCode",{parentName:"p"},"networks")," object in the ",(0,o.kt)("a",{parentName:"p",href:"https://trufflesuite.com/docs/truffle/reference/configuration#networks"},"Truffle configuration file")," to specify which networks to connect to for deployments and testing. The Quickstart RPC service endpoint is ",(0,o.kt)("inlineCode",{parentName:"p"},"http://localhost:8545"),"."),(0,o.kt)("p",null,"For example, the following is the Truffle configuration file for the Pet Shop dapp used in the Quickstart Besu network:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'const PrivateKeyProvider = require("@truffle/hdwallet-provider");\n\n// insert the private key of the account used in MetaMask, e.g. Account 1 (Miner Coinbase Account)\nconst privateKey =\n  "c87509a1c067bbde78beb793e6fa76530b6382a4c0241e5e4a9ec0a0f44dc0d3";\n\nmodule.exports = {\n  networks: {\n    development: {\n      host: "127.0.0.1",\n      port: 7545,\n      network_id: "*", // Match any network id\n    },\n    develop: {\n      port: 8545,\n    },\n    quickstartWallet: {\n      provider: () =>\n        new PrivateKeyProvider(privateKey, "http://localhost:8545"),\n      network_id: "*",\n    },\n  },\n};\n')),(0,o.kt)("p",null,"Deploy the dapp using:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"truffle migrate --network quickstartWallet\n")),(0,o.kt)("h2",{id:"stop-and-restart-the-private-network-without-removing-containers"},"Stop and restart the private network without removing containers"),(0,o.kt)("p",null,"To shut down the private network without deleting the containers:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"./stop.sh\n")),(0,o.kt)("p",null,"This command stops the containers related to the services specified in the ",(0,o.kt)("inlineCode",{parentName:"p"},"docker-compose.yml")," file."),(0,o.kt)("p",null,"To restart the private network:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"./resume.sh\n")),(0,o.kt)("h2",{id:"stop-the-private-network-and-remove-containers"},"Stop the private network and remove containers"),(0,o.kt)("p",null,"To shut down the private network and delete all containers and images created from running the sample network and the Pet Shop dapp:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"./remove.sh\n")),(0,o.kt)("h2",{id:"add-a-new-node-to-the-network"},"Add a new node to the network"),(0,o.kt)("p",null,"New nodes joining an existing network require the following:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"The same genesis file used by all other nodes on the running network."),(0,o.kt)("li",{parentName:"ul"},"A list of nodes to connect to; this is done by specifying ",(0,o.kt)("a",{parentName:"li",href:"/23.4.0/private-networks/how-to/configure/bootnodes"},"bootnodes"),", or by providing a list of ",(0,o.kt)("a",{parentName:"li",href:"/23.4.0/public-networks/how-to/connect/static-nodes"},"static nodes"),"."),(0,o.kt)("li",{parentName:"ul"},"A node key pair and optionally an account. If the running network is using permissions, then you need to add the new node's enode details to the ",(0,o.kt)("a",{parentName:"li",href:"/23.4.0/private-networks/how-to/use-permissioning/local"},"permissions file")," used by existing nodes, or update the onchain permissioning contract.")),(0,o.kt)("p",null,"The following steps describe the process to add a new node to the Developer Quickstart."),(0,o.kt)("h3",{id:"1-create-the-node-key-files"},"1. Create the node key files"),(0,o.kt)("p",null,"Create a node key pair and account for a new node by running the following script:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'cd ./extra\nnpm install\nnode generate_node_keys.js --password "Password"\n')),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"The ",(0,o.kt)("inlineCode",{parentName:"p"},"--password")," parameter is optional.")),(0,o.kt)("h3",{id:"2-create-new-node-directory"},"2. Create new node directory"),(0,o.kt)("p",null,"Navigate to the directory where the configuration files for the network were created."),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"The directory was specified in an earlier step when running ",(0,o.kt)("inlineCode",{parentName:"p"},"npx quorum-dev-quickstart"),". The default location is ",(0,o.kt)("inlineCode",{parentName:"p"},"./quorum-test-network"),".")),(0,o.kt)("p",null,"In the ",(0,o.kt)("inlineCode",{parentName:"p"},"config/nodes")," directory, create a subdirectory for the new node (for example, ",(0,o.kt)("inlineCode",{parentName:"p"},"newnode"),"), and move the ",(0,o.kt)("inlineCode",{parentName:"p"},"nodekey"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"nodekey.pub"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"address")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"accountkey")," files from the previous step into this directory."),(0,o.kt)("h3",{id:"3-update-docker-compose"},"3. Update docker-compose"),(0,o.kt)("p",null,"Add an entry for the new node into the docker-compose file:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"newnode:\n  <<: *besu-def\n  container_name: newnode\n  volumes:\n    - public-keys:/opt/besu/public-keys/\n    - ./config/besu/:/config\n    - ./config/nodes/newnode:/opt/besu/keys\n    - ./logs/besu:/tmp/besu\n  depends_on:\n    - validator1\n  networks:\n    quorum-dev-quickstart:\n      ipv4_address: 172.16.239.41\n")),(0,o.kt)("p",null,"!!! important"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"Select an IP address and port map not being used for the other containers.\nMount the newly created folder `./config/nodes/newnode` to the `/opt/besu/keys` directory of the new node, as seen\nin this example.\n")),(0,o.kt)("h3",{id:"4-update-prometheus-configuration"},"4. Update Prometheus configuration"),(0,o.kt)("p",null,"Update ",(0,o.kt)("inlineCode",{parentName:"p"},"prometheus.yml")," in the ",(0,o.kt)("inlineCode",{parentName:"p"},"./config/prometheus/")," directory to configure metrics to display in Grafana."),(0,o.kt)("p",null,"Insert the following under ",(0,o.kt)("inlineCode",{parentName:"p"},"scrape_configs")," section in the file. Change ",(0,o.kt)("inlineCode",{parentName:"p"},"job_name")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"targets")," appropriately if you've updated them."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"- job_name: newnode\n  scrape_interval: 15s\n  scrape_timeout: 10s\n  metrics_path: /metrics\n  scheme: http\n  static_configs:\n    - targets: [newnode:9545]\n")),(0,o.kt)("h3",{id:"5-update-files-with-the-enode-address"},"5. Update files with the enode address"),(0,o.kt)("p",null,"Add the new node's enode address to the ",(0,o.kt)("a",{parentName:"p",href:"/23.4.0/public-networks/how-to/connect/static-nodes"},"static nodes")," file and ",(0,o.kt)("a",{parentName:"p",href:"/23.4.0/private-networks/how-to/use-permissioning/local"},"permissions file"),". The enode uses the format ",(0,o.kt)("inlineCode",{parentName:"p"},"enode://pubkey@ip_address:30303"),". If the ",(0,o.kt)("inlineCode",{parentName:"p"},"nodekey.pub")," is ",(0,o.kt)("inlineCode",{parentName:"p"},"4540ea...9c1d78")," and the IP address is ",(0,o.kt)("inlineCode",{parentName:"p"},"172.16.239.41"),", then the enode address is ",(0,o.kt)("inlineCode",{parentName:"p"},'"enode://4540ea...9c1d78@172.16.239.41:30303"'),", which must be added to both files."),(0,o.kt)("p",null,"Alternatively, call the ",(0,o.kt)("a",{parentName:"p",href:"/23.4.0/public-networks/reference/api/#perm_addnodestoallowlist"},(0,o.kt)("inlineCode",{parentName:"a"},"perm_addNodesToAllowlist"))," API method on existing nodes to add the new node without restarting."),(0,o.kt)("admonition",{type:"note"},(0,o.kt)("p",{parentName:"admonition"},"Calling the API method by itself only persists for as long as the nodes remain online and is lost on the next restart."),(0,o.kt)("p",{parentName:"admonition"},"On a live network, the new node must be added to the ",(0,o.kt)("a",{parentName:"p",href:"/23.4.0/private-networks/how-to/use-permissioning/local"},"permissions file")," so that subsequent restarts of the nodes are aware of the change.")),(0,o.kt)("h3",{id:"6-start-the-network"},"6. Start the network"),(0,o.kt)("p",null,"Once complete, start the network up with ",(0,o.kt)("inlineCode",{parentName:"p"},"./run.sh"),". When using the smart contract you can either make changes via a ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/ConsenSys/permissioning-smart-contracts"},"dapp")," or via ",(0,o.kt)("a",{parentName:"p",href:"/23.4.0/public-networks/reference/api/#perm_addnodestoallowlist"},"RPC API calls"),"."))}f.isMDXComponent=!0},93508:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/files/postman_collection-1354ef299155a66a6083e20e7571a9d3.json"},69571:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/dapp-explorer-tx-4832cf06aacadf781a6e485a2555cf4c.png"},27154:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/dapp-metamask-tx-b4805abc15ffa4ea88dca9f72c81ecc9.png"},65592:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/dapp-ui-f4a20b1729f0333c993d607f11c34e54.png"},75093:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/grafana-609e4f8ed34ccebba624a8917e366c36.png"},37866:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/grafana_loki-b7ec065514dfe7bb716e9029bda5c056.png"}}]);